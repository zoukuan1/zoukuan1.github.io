<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Windows10下使用Hexo和Github搭建个人博客</title>
    <url>/2020/10/26/first-blog/</url>
    <content><![CDATA[<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>   <strong>安装的基本思想是尽量不往C盘塞东西，所以尽可能选择其他盘来安装</strong>。</p>
<ul>
<li><p>安装Node</p>
<p>前往Node官网 <a href="https://nodejs.org/en/">https://nodejs.org/en/</a>  ，下载最新版LTS</p>
<p><img src="/2020/10/26/first-blog/image-20201026211520822.png" alt="image-20201026211520822"></p>
<p>打开<strong>node-v12.19.0-x64.msi</strong>文件进行安装</p>
<p><img src="/2020/10/26/first-blog/image-20201026211720405.png" alt="image-20201026211720405"></p>
</li>
</ul>
<p>  <img src="/2020/10/26/first-blog/image-20201026211807081.png" alt="image-20201026211807081"></p>
<p>  <img src="/2020/10/26/first-blog/image-20201026211852195.png" alt="image-20201026211852195"></p>
<p>  出现下图，证明Node安装成功</p>
<p>  <img src="/2020/10/26/first-blog/image-20201026212001614.png" alt="image-20201026212001614"></p>
<p>  连按两次回车(<strong>ENTER</strong>)，然后直接关闭</p>
<ul>
<li><p>安装Git</p>
<p>前往Git下载网站 <a href="https://git-scm.com/">https://git-scm.com/</a> ，选择适当版本下载。</p>
<p><img src="/2020/10/26/first-blog/image-20201026225441753.png" alt="image-20201026225441753"></p>
<p>打开<strong>Git-2.29.1-64-bit.exe</strong>文件进行安装</p>
<p><img src="/2020/10/26/first-blog/image-20201026225635141.png" alt="image-20201026225635141"></p>
<p><img src="/2020/10/26/first-blog/image-20201026225658007.png" alt="image-20201026225658007"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230122943.png" alt="image-20201026230122943"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230152838.png" alt="image-20201026230152838"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230315817.png" alt="image-20201026230315817"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230337386.png" alt="image-20201026230337386"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230357482.png" alt="image-20201026230357482"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230441681.png" alt="image-20201026230441681"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230458800.png" alt="image-20201026230458800"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230520232.png" alt="image-20201026230520232"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230538588.png" alt="image-20201026230538588"></p>
<p><img src="/2020/10/26/first-blog/image-20201026230606097.png" alt="image-20201026230606097"></p>
<p>​    成功结果如下：</p>
<p><img src="/2020/10/26/first-blog/image-20201026230903894.png" alt="image-20201026230903894"></p>
</li>
</ul>
<h2 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h2><h3 id="1-以管理员方式打开cmd"><a href="#1-以管理员方式打开cmd" class="headerlink" title="1.以管理员方式打开cmd"></a>1.以管理员方式打开cmd</h3><p>​        我的方法如下：</p>
<p><img src="/2020/10/26/first-blog/image-20201026212538303.png" alt="image-20201026212538303"></p>
<p><img src="/2020/10/26/first-blog/image-20201026212703489.png" alt="image-20201026212703489"></p>
<h3 id="2-查看并验证Node安装结果"><a href="#2-查看并验证Node安装结果" class="headerlink" title="2.查看并验证Node安装结果"></a>2.查看并验证Node安装结果</h3><p>​        <strong>cmd</strong>命令行输入 <code>node -v</code> ，查看<strong>Node</strong>版本；输入 <code>npm -v</code> ，查看包管理器<strong>npm</strong>版本</p>
<p><img src="/2020/10/26/first-blog/image-20201026213543111.png" alt="image-20201026213543111"></p>
<h3 id="3-安装淘宝的包管理器cnpm"><a href="#3-安装淘宝的包管理器cnpm" class="headerlink" title="3.安装淘宝的包管理器cnpm"></a>3.安装淘宝的包管理器cnpm</h3><p>​        考虑到镜像下载速度的快慢，选择使用国内的包管理器对包进行安装，这里采用淘宝的cnpm。</p>
<p>​        在<strong>cmd</strong>命令行里输入 <code>npm install -g cnpm --registry=http://registry.npm.taobao.org</code></p>
<p><img src="/2020/10/26/first-blog/image-20201026222106396.png" alt="image-20201026222106396"></p>
<p>​        验证<strong>cnpm</strong>安装结果，命令行输入 <code>cnpm -v</code></p>
<p><img src="/2020/10/26/first-blog/image-20201026222245104.png" alt="image-20201026222245104"></p>
<h3 id="4-安装hexo"><a href="#4-安装hexo" class="headerlink" title="4.安装hexo"></a>4.安装hexo</h3><p>​        安装好<strong>cnpm</strong>后，在<strong>cmd</strong>命令行里输入 <code>cnpm install -g hexo-cli</code> ，安装<strong>hexo</strong></p>
<p><img src="/2020/10/26/first-blog/image-20201026224243864.png" alt="image-20201026224243864"></p>
<p>​        验证hexo安装结果，<strong>cmd</strong>命令行输入 <code>hexo -v</code></p>
<p><img src="/2020/10/26/first-blog/image-20201026224411245.png" alt="image-20201026224411245"></p>
<h3 id="5-创建Blog文件夹"><a href="#5-创建Blog文件夹" class="headerlink" title="5.创建Blog文件夹"></a>5.创建Blog文件夹</h3><p>​        首先创建Blog文件夹，用来存储编写的Blog。文件夹的位置由自己定夺，我选择在E盘处新建</p>
<p>​        <strong>myblog</strong>文件夹 ，如下图：</p>
<p><img src="/2020/10/26/first-blog/image-20201026224907157.png" alt="image-20201026224907157"></p>
<p>​        然后在<strong>cmd</strong>命令行输入 <code>cd E:/myblog</code> ，将当前路径转到目标文件夹。</p>
<h3 id="6-配置Git"><a href="#6-配置Git" class="headerlink" title="6.配置Git"></a>6.配置Git</h3><p>​        打开安装好的 <strong>git-bash.exe</strong>，命令行输入 <code>git config --global user.name &quot;xxx&quot;</code> 和 <code>git config --global user.email &quot;xxx@xx.com&quot;</code> ，配置git用户的名称和邮箱。</p>
<p><img src="/2020/10/26/first-blog/image-20201027165954462.png" alt="image-20201027165954462"></p>
<p>​        然后在本地生成ssh密钥， <strong>git-bash</strong>里输入 <code>ssh-keygen -t rsa -C &quot;xx@xxx.com&quot;</code> ，即可得到密钥。</p>
<p><img src="/2020/10/26/first-blog/image-20201027170525522.png" alt="image-20201027170525522"></p>
<p>​        在上图中显示文件保存在c盘local本地，进入到<strong>.ssh</strong>文件夹，查看以<strong>ssh-rsa</strong>开头的密钥。</p>
<p><img src="/2020/10/26/first-blog/image-20201027170845850.png" alt="image-20201027170845850"></p>
<p><img src="/2020/10/26/first-blog/image-20201027170931203.png" alt="image-20201027170931203"></p>
<p>​        复制密钥，然后在github官网里打开个人设置</p>
<p><img src="/2020/10/26/first-blog/image-20201027171157545.png" alt="image-20201027171157545"></p>
<p>​        在设置的左边功能栏里选择 <strong>SSH and GPG Keys</strong>， 选择<strong>New SSH key</strong> , 不用写标题，直接将刚刚复制的密钥粘贴，。</p>
<p><img src="/2020/10/26/first-blog/image-20201027171254715.png" alt="image-20201027171254715"></p>
<p><img src="/2020/10/26/first-blog/image-20201027171434239.png" alt="image-20201027171434239"></p>
<p><img src="/2020/10/26/first-blog/image-20201027171641121.png" alt="image-20201027171641121"></p>
<h3 id="7-Blog初始化"><a href="#7-Blog初始化" class="headerlink" title="7.Blog初始化"></a>7.Blog初始化</h3><p>​        配置好git后，在<strong>git-bash</strong>里输入 <code>cd /e/myblog</code> , 将当前路径转移到目标文件夹，再输入<code>hexo init</code></p>
<p><img src="/2020/10/26/first-blog/image-20201027172021077.png" alt="image-20201027172021077"></p>
<p>​        然后在 <strong>cmd</strong> 命令行里输入<code>hexo s</code> ，启动hexo</p>
<p><img src="/2020/10/26/first-blog/image-20201027172159713.png" alt="image-20201027172159713"></p>
<p>​        在浏览器上打开 <strong>localhost:4000</strong>，即可查看我们编写的blog，在此已完成blog平台的搭建</p>
<p><img src="/2020/10/26/first-blog/image-20201027172403843.png" alt="image-20201027172403843"></p>
<p>​        此时可以编写新的blog，在<strong>cmd</strong>命令行里输入 <strong>ctrl+c</strong> ，再输入<strong>Y</strong> ， 终止hexo运行， 这时候无法进入上述网址。输入<code>hexo n &quot;my first blog&quot;</code> ，在<strong>E://myblog/source/_posts</strong>文件夹里存在一个新建的md文件，这就是blog，以后每个新的blog都将保存在这里。</p>
<p><img src="/2020/10/26/first-blog/image-20201027173141927.png" alt="image-20201027173141927"></p>
<p><img src="/2020/10/26/first-blog/image-20201027173229694.png" alt="image-20201027173229694"></p>
<p>​        在这里可以选择相应的md编写软件来对md文件进行编辑，我选择Typora，当然也可以用记事本，但输入的语言格式要符合md规范。然后cmd命令行里输入<code>hexo g</code> ，将新写的blog发布。如果输入<code>hexo clean</code> ，可以清理数据库缓存。</p>
<p><img src="/2020/10/26/first-blog/image-20201027173716448.png" alt="image-20201027173716448"></p>
<p>​        这时候再输入<code>hexo s</code> ，在<strong>localhost:4000</strong>里即可看到新发布的blog</p>
<p><img src="/2020/10/26/first-blog/image-20201027173844199.png" alt="image-20201027173844199"></p>
<h3 id="8-配置公网网址"><a href="#8-配置公网网址" class="headerlink" title="8.配置公网网址"></a>8.配置公网网址</h3><p>​        此时的blog网址只能自己本地查看，外人无法进入浏览，此时借由github搭建公网网址。首先在github上新建仓库，仓库名为用户名组成的github网址，<strong>必须与用户名相同</strong>。这个仓库名就是之后让外人进入你blog的网址。</p>
<p><img src="/2020/10/26/first-blog/image-20201027174056649.png" alt="image-20201027174056649"></p>
<p><img src="/2020/10/26/first-blog/image-20201027200019309.png" alt="image-20201027200019309"></p>
<p>​        回到<strong>cmd</strong>命令行，先退出hexo，然后输入<code>cnpm install --save hexo-deployer-git</code> </p>
<p><img src="/2020/10/26/first-blog/image-20201027174754884.png" alt="image-20201027174754884"></p>
<p>​        在E://myblog文件夹里找到<strong>_config.yml</strong>文件，对其配置。在最后地方的 <strong>type:””</strong>处，往<strong>‘’</strong>里写入<strong>git</strong>，然后换行写入 <strong>repo: ‘’</strong> ，(<strong>注意在 : 后加一个空格，再写’’</strong>)，<strong>‘’</strong>里写入刚刚新建的仓库链接，即<strong>仓库页面的HTTPS | SSH处展示的链接</strong>，复制写入即可。再换行写入<strong>branch: ‘master’</strong> ，保存文件。</p>
<p><img src="/2020/10/26/first-blog/image-20201027174929832.png" alt="image-20201027174929832"></p>
<p><img src="/2020/10/26/first-blog/image-20201027175408829.png" alt="image-20201027175408829"></p>
<p><img src="/2020/10/26/first-blog/image-20201027175642042.png" alt="image-20201027175642042"></p>
<p>​       然后在<strong>git-bash</strong>命令行里输入<code>hexo d</code> ，将blog部署到github远端，过程中输入<strong>github的用户名和密码(第一次部署要输入)</strong>，即可完成远端部署。</p>
<p><img src="/2020/10/26/first-blog/image-20201027180949005.png" alt="image-20201027180949005"></p>
<hr>
<h2 id="Blog发布的步骤"><a href="#Blog发布的步骤" class="headerlink" title="Blog发布的步骤"></a>Blog发布的步骤</h2><h3 id="1-在cmd命令行里先将路径转到blog文件夹，再输入-hexo-n-“new-blog”，创建md文件"><a href="#1-在cmd命令行里先将路径转到blog文件夹，再输入-hexo-n-“new-blog”，创建md文件" class="headerlink" title="1.在cmd命令行里先将路径转到blog文件夹，再输入 hexo n “new blog”，创建md文件"></a>1.在cmd命令行里先将路径转到blog文件夹，再输入 hexo n “new blog”，创建md文件</h3><h3 id="2-对md文件进行编辑"><a href="#2-对md文件进行编辑" class="headerlink" title="2.对md文件进行编辑"></a>2.对md文件进行编辑</h3><h3 id="3-在cmd命令行里输入-hexo-g-，生成blog"><a href="#3-在cmd命令行里输入-hexo-g-，生成blog" class="headerlink" title="3.在cmd命令行里输入 hexo g ，生成blog"></a>3.在cmd命令行里输入 hexo g ，生成blog</h3><h3 id="4-在cmd命令行里输入-hexo-s-，启动blog平台-localhost-4000"><a href="#4-在cmd命令行里输入-hexo-s-，启动blog平台-localhost-4000" class="headerlink" title="(4.在cmd命令行里输入 hexo s ，启动blog平台(localhost:4000))"></a>(4.在cmd命令行里输入 hexo s ，启动blog平台(localhost:4000))</h3><h3 id="5-在git-bash里先将路径转到blog文件夹，输入-hexo-d-，将blog部署到公网网址-用户名-github-io"><a href="#5-在git-bash里先将路径转到blog文件夹，输入-hexo-d-，将blog部署到公网网址-用户名-github-io" class="headerlink" title="5.在git-bash里先将路径转到blog文件夹，输入 hexo d ，将blog部署到公网网址(用户名.github.io)"></a>5.在git-bash里先将路径转到blog文件夹，输入 hexo d ，将blog部署到公网网址(用户名.github.io)</h3><hr>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="本地图片无法显示"><a href="#本地图片无法显示" class="headerlink" title="本地图片无法显示"></a>本地图片无法显示</h3><p>解决方法：首先在<strong>git-bash</strong>里输入<code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code>，安装好插件后打开<strong>_config.yml</strong>文件，修改<code>post_asset_folder: false</code>为<code>post_asset_folder: true</code>。最后在<strong>blog/public/2020/10/26/first-blog</strong>处放入<strong>blog/source/_posts/first-blog.assets</strong>文件夹里的全部图片。</p>
<p>解释：first-blog.assets为你编写的blog文件所使用的图片文件夹，当你放入图片到md文档时，会自动将图片保存到first-blog.assets里。hexo-asset-image是一个插件，可以将本地图片以正确格式插入到网页源码里。修改_config.yml的目的是让hexo能够调用该插件。blog的发布网址本质上是一个网站，该网站保存在public文件夹里。而每个博客都有自己的一个网页，hexo根据博客发布的时间来放置每个博客的index.html。以本博客为例，发布时间为2020/10/26，则hexo会在public文件夹里创建2020文件夹，在2020文件夹里创建10文件夹，以此类推，最后在26文件夹里创建博客文件夹，即以博客名命名的文件夹，这个文件夹下就放置本博客的index.html。hexo-assets-image的作用就是将图片的引用地址设置在此文件夹下，所以需要将本博客的图片文件夹first-blog.assets里的全部图片放到index.html所在的文件夹里，即可实现图片相对路径的调用，也就解决此问题。</p>
]]></content>
      <categories>
        <category>项目(平台)搭建</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>Github</tag>
        <tag>Windows 10</tag>
      </tags>
  </entry>
  <entry>
    <title>windows10下解决Github网站加载超时问题</title>
    <url>/2020/11/11/login-problem-about-Github/</url>
    <content><![CDATA[<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>Github是我们学习代码的主要网站之一，但由于国内网的原因，导致该网站(<a href="https://github.com/">https://github.com/</a>) 有时无法加载进入，因此了解如何解决该问题很有必要。</p>
<p>按以下步骤完成操作：</p>
<h4 id="1-查询Github最新IP地址"><a href="#1-查询Github最新IP地址" class="headerlink" title="1.查询Github最新IP地址"></a>1.查询Github最新IP地址</h4><p>进入地址查询网站<a href="https://www.ipaddress.com/">https://www.ipaddress.com/</a> ，查询以下网站的IP地址</p>
<p><strong>github.com</strong> (<a href="https://github.com.ipaddress.com/">https://github.com.ipaddress.com/</a>) </p>
<p><strong>github.global.ssl.fastly.net</strong> (<a href="https://fastly.net.ipaddress.com/github.global.ssl.fastly.net">https://fastly.net.ipaddress.com/github.global.ssl.fastly.net</a>) </p>
<p>如下图：</p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111200005781.png" alt="image-20201111200005781"></p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111200039892.png" alt="image-20201111200039892"></p>
<h4 id="2-修改HOSTS文件"><a href="#2-修改HOSTS文件" class="headerlink" title="2.修改HOSTS文件"></a>2.修改HOSTS文件</h4><p>在系统盘(一般是C盘)里，找到 <strong>Windows</strong> 文件夹，进入并找到 <strong>System32</strong> 文件夹，进入并找到 <strong>drivers</strong> 文件夹，进入并找到 <strong>etc</strong> 文件夹，发现 <strong>HOSTS</strong> 文件。具体路径如下：</p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111200642209.png" alt="image-20201111200642209"></p>
<p>然后鼠标左键点击文件夹左上角的<strong>文件</strong></p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111200749393.png" alt="image-20201111200749393"></p>
<p>选择<strong>打开Windows PowerShell(R)**，再选择</strong>以管理员身份打开Windows PowerShell(A**)，以此以管理员身份进入系统脚本</p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111200827399.png" alt="image-20201111200827399"></p>
<p>打开后输入<code>notepad HOSTS</code>，用记事本方式编辑<strong>HOSTS</strong>文件</p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111201108125.png" alt="image-20201111201108125"></p>
<h4 id="3-HOSTS文件添加IP地址"><a href="#3-HOSTS文件添加IP地址" class="headerlink" title="3.HOSTS文件添加IP地址"></a>3.HOSTS文件添加IP地址</h4><p>HOSTS文件里以 <strong>“IP地址 域名”</strong> 的方式存储需要解析的IP地址，经过本机解析后，相应网站即可正常加载进入。将第1步根据域名得到的IP地址输入到HOSTS文件里，以第1步截图为例，分别为 <code>140.82.112.4 github.com</code>、<code>199.232.69.194 github.global.ssl.fastly.net</code>。需要注意的是 <strong>IP地址</strong> 与 <strong>域名</strong> 之间存在一个空格。</p>
<p><img src="/2020/11/11/login-problem-about-Github/image-20201111202129297.png" alt="image-20201111202129297"></p>
<p>输入完成后保存即可(快捷键：ctrl + s)。至此完成所有操作步骤，此时应该能进入Github网站。</p>
<hr>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><ul>
<li>需要注意的是Github的IP地址会经常变更，使用该解决方法后，每当Github网站无法进入时都需要根据最新的IP地址对原IP地址做出修改</li>
<li>有时存在及时修改Github的IP地址后也无法进入的问题，这时候可以先将HOSTS文件里有关Github的IP地址都删除，然后保存HOSTS文件，再重新按格式输入最新的IP地址和域名，此时应该能进入Github(因为我尝试后成功了)。如若不能进入，请移步百度。</li>
</ul>
]]></content>
      <categories>
        <category>问题解决</category>
        <category>Github</category>
      </categories>
      <tags>
        <tag>Github</tag>
        <tag>Windows 10</tag>
      </tags>
  </entry>
  <entry>
    <title>使用Git将本地文件夹上传到Github</title>
    <url>/2020/11/12/upload-local-folder-to-Github/</url>
    <content><![CDATA[<p>在这里介绍如何使用git上传本地文件夹到仓库。</p>
<h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><ol>
<li><p>在Github上新建一个仓库，注意输入仓库名后就直接创建，不需要在此添加其他文件</p>
</li>
<li><p>然后记下仓库的HTTPS，以待后用</p>
<p><img src="/2020/11/12/upload-local-folder-to-Github/image-20201112163102977.png" alt="image-20201112163102977"></p>
</li>
<li><p>打开<strong>git-bash</strong>，转移路径到需要上传的目录下，输入 <code>git init</code></p>
</li>
<li><p>输入 <code>git add .</code> ，添加所有文件到缓存区，当然也可输入 <code>git add 你要上传的文件全名</code>，可以将单个文件上传</p>
</li>
<li><p>输入 <code>git commit -m</code> “这里是每个文件后的注释”，将添加的文件提交给本地仓库</p>
</li>
<li><p>输入 <code>git remote add orgin 第二步的HTTPS链接</code>，将本地仓库关联Github</p>
</li>
<li><p>输入 <code>git push -u oringin master</code>，将文件推送到Github仓库，下次推送时可不输入 -u</p>
<hr>
</li>
</ol>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><ul>
<li>创建的时候没有添加README.md，在上传完文件夹后Github会有提醒添加，你也可以在本地写一个再使用git上传</li>
</ul>
]]></content>
      <categories>
        <category>日常使用</category>
        <category>Github</category>
      </categories>
      <tags>
        <tag>Github</tag>
      </tags>
  </entry>
  <entry>
    <title>Python + Flask + echarts + MySQL 实现中国地图的前端网页使用</title>
    <url>/2020/11/12/china-map/</url>
    <content><![CDATA[<p>这篇博客介绍如何使用Python、Flask、echarts、MySQL实现中国地图的前端使用，以及如何将后端数据库数据传输到前端网页。</p>
<h2 id="项目环境"><a href="#项目环境" class="headerlink" title="项目环境"></a>项目环境</h2><ul>
<li>Pycharm2018.2</li>
<li>Python3.7</li>
<li>MySQL5.7</li>
<li>Flask 1.1.2</li>
</ul>
<h2 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h2><ol>
<li>创建数据库以及表</li>
<li>获取数据，并保存到数据库</li>
<li>搭建前端页面</li>
<li>反馈数据库数据</li>
<li>显示各省份学生信息</li>
</ol>
<hr>
<p>本次以在中国地图上显示各省份的学生信息为例</p>
<h3 id="1-创建数据库以及表"><a href="#1-创建数据库以及表" class="headerlink" title="1.创建数据库以及表"></a>1.创建数据库以及表</h3><p>在<strong>MySQL</strong>里依次输入以下代码，得到数据库和相应的表</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create DATABASE studentInfo CHARACTERSET gbk COLLATE gbk_chinese_ci</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">create TABLE &#39;student&#39;</span><br><span class="line">(</span><br><span class="line">	&#39;name&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    &#39;sex&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    &#39;age&#39; INT NOT NULL,</span><br><span class="line">    &#39;height&#39; FLOAT NOT NULL,</span><br><span class="line">    &#39;weight&#39; DOUBLE NOT NULL,</span><br><span class="line">    &#39;province&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    &#39;parties&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    &#39;consumption&#39; INT NOT NULL,</span><br><span class="line">    &#39;havefriend&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    &#39;playgame&#39; VARCHAR(45) NOT NULL,</span><br><span class="line">    PRIMARY KEY(&#39;name&#39;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="2-获取数据，并保存到数据库"><a href="#2-获取数据，并保存到数据库" class="headerlink" title="2.获取数据，并保存到数据库"></a>2.获取数据，并保存到数据库</h3><p>我们先要从一个叫<strong>Info.txt</strong>的文件中提取数据，里面有人名及对应的性别，如下图：</p>
<p><img src="/2020/11/12/china-map/image-20201112172619869.png" alt="image-20201112172619869"></p>
<p>但是里面的性别数据存在无效项，在提取时需要筛选，代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 读取姓名和性别</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;Info.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> data <span class="keyword">in</span> f.readlines():</span><br><span class="line">        temp = data.strip(<span class="string">&#x27;\n&#x27;</span>)         <span class="comment"># 去掉换行符</span></span><br><span class="line">        temp = temp.split(<span class="string">&#x27;,&#x27;</span>)          <span class="comment"># 以逗号做区分</span></span><br><span class="line">        <span class="keyword">if</span> temp[<span class="number">1</span>] != <span class="string">&quot;未知&quot;</span>:            <span class="comment"># 筛选性别</span></span><br><span class="line">            count = count + <span class="number">1</span></span><br><span class="line">            all_names.append(temp[<span class="number">0</span>])   <span class="comment"># 保留确定性别的名字</span></span><br><span class="line">            all_sex.append(temp[<span class="number">1</span>])     <span class="comment"># 保留名字对应的性别</span></span><br></pre></td></tr></table></figure>

<p>除了姓名和性别外，其他的学生信息数据都是在一定范围内随机生成的。但是<strong>Info.txt</strong>有百万条数据，即使筛选后数量仍较大，所以考虑只取500条数据存储到数据库。而为了确保随机性，选择随机生成下标来随机获取列表数据。代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 随机抽样500个下标值，提取相应下标的姓名和性别</span></span><br><span class="line">indexs = random.sample(<span class="built_in">range</span>(<span class="number">0</span>, count), <span class="number">500</span>)</span><br><span class="line">names = [all_names[index] <span class="keyword">for</span> index <span class="keyword">in</span> indexs]</span><br><span class="line">sex = [all_sex[index] <span class="keyword">for</span> index <span class="keyword">in</span> indexs]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从0 - 33 中随机生成500份下标，提取相应的省份名</span></span><br><span class="line">province_indexs = np.random.randint(<span class="number">0</span>, <span class="number">34</span>, size=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从0 1中随机生成500份下标</span></span><br><span class="line">two_flag = np.random.randint(<span class="number">0</span>, <span class="number">2</span>, size=<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 从0 - 3 中随机生成500份下标</span></span><br><span class="line">four_flag = np.random.randint(<span class="number">0</span>, <span class="number">4</span>, size=<span class="number">500</span>)</span><br></pre></td></tr></table></figure>

<p>将所有学生信息组合，逐条插入到数据库中。代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将学生的相关信息组合，使用上面获取的下标向对应的列表获取数据，并保存到数据库里</span></span><br><span class="line">studentInfos = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">500</span>):</span><br><span class="line">    studentInfo = [names[i], sex[i], np.random.randint(<span class="number">18</span>, <span class="number">23</span>), np.random.uniform(<span class="number">1.50</span>, <span class="number">2.00</span>),</span><br><span class="line">                   np.random.uniform(<span class="number">70</span>, <span class="number">200</span>), province[province_indexs[i]], parties[four_flag[i]],</span><br><span class="line">                   np.random.randint(<span class="number">100</span>, <span class="number">2000</span>), havefriend[two_flag[i]], playgame[two_flag[i]]]</span><br><span class="line">    studentInfos.append(studentInfo)</span><br><span class="line">    utils.insert_data(studentInfo)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将数据保存到数据库</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_data</span>(<span class="params">studentInfo</span>):</span></span><br><span class="line">    name = studentInfo[<span class="number">0</span>]</span><br><span class="line">    sex = studentInfo[<span class="number">1</span>]</span><br><span class="line">    age = studentInfo[<span class="number">2</span>]</span><br><span class="line">    height = studentInfo[<span class="number">3</span>]</span><br><span class="line">    weight = studentInfo[<span class="number">4</span>]</span><br><span class="line">    province = studentInfo[<span class="number">5</span>]</span><br><span class="line">    parties = studentInfo[<span class="number">6</span>]</span><br><span class="line">    consumption = studentInfo[<span class="number">7</span>]</span><br><span class="line">    havefriend = studentInfo[<span class="number">8</span>]</span><br><span class="line">    playgame = studentInfo[<span class="number">9</span>]</span><br><span class="line">    sql = <span class="string">&quot;insert into studentinfo (name, sex, age, height, weight, province, parties, consumption, havefriend, playgame) &quot;</span> \</span><br><span class="line">          <span class="string">&quot;value(&#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#123;&#125;, &#123;&#125;, &#123;&#125;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;, &#123;&#125;, &#x27;&#123;&#125;&#x27;, &#x27;&#123;&#125;&#x27;)&quot;</span>.<span class="built_in">format</span>(name, sex, age, height, weight, province,</span><br><span class="line">           parties, consumption, havefriend, playgame)</span><br><span class="line">    conn, cursor = get_conn()</span><br><span class="line">    cursor.execute(sql)</span><br><span class="line">    conn.commit()</span><br><span class="line">    close_conn(conn, cursor)</span><br></pre></td></tr></table></figure>

<p>为了防止数据库的数据丢失，将所有的学生信息都存储在一个**.csv**文件中，利于数据库维护和数据载入。代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 将所有学生信息写出为.csv文件</span></span><br><span class="line">file_csv = codecs.<span class="built_in">open</span>(<span class="string">&quot;studentInfo.csv&quot;</span>, <span class="string">&#x27;w+&#x27;</span>, <span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">writer = csv.writer(file_csv, delimiter=<span class="string">&#x27; &#x27;</span>, quotechar=<span class="string">&#x27; &#x27;</span>, quoting=csv.QUOTE_MINIMAL)</span><br><span class="line">writer.writerow([<span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;性别&quot;</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;身高&quot;</span>, <span class="string">&quot;体重&quot;</span>, <span class="string">&quot;省份&quot;</span>, <span class="string">&quot;党派&quot;</span>, <span class="string">&quot;消费&quot;</span>, <span class="string">&quot;有无男/女朋友&quot;</span>, <span class="string">&quot;是否打游戏&quot;</span>])</span><br><span class="line"><span class="keyword">for</span> studentInfo <span class="keyword">in</span> studentInfos:</span><br><span class="line">    writer.writerow(studentInfo)</span><br></pre></td></tr></table></figure>

<p>至此数据获取结束，并且可以保存到MySQL数据库中。结果如下：</p>
<p><img src="/2020/11/12/china-map/image-20201112185809736.png" alt="image-20201112185809736"></p>
<h3 id="3-搭建前端页面"><a href="#3-搭建前端页面" class="headerlink" title="3.搭建前端页面"></a>3.搭建前端页面</h3><p>因为我们采用echarts插件来加载中国地图，所以需要提前准备好如下.js文件：<strong>echarts.js</strong>、<strong>jquery-1.11.1.min.js</strong>、<strong>china.js</strong>。可以选择去官网下载，我这里也提供百度云链接：<a href="https://pan.baidu.com/s/1gInLSwC-3EzKBmXYQDBXgg">https://pan.baidu.com/s/1gInLSwC-3EzKBmXYQDBXgg</a> 提取码：zkzk 解压密码：123456</p>
<p>接下来我们编写.html文件。首先导入上述.js文件，因为只显示一张中国地图，所以只需要定义一个div做分区。为了美观，还需要载入.css文件对页面排版。考虑到设置地图属性的代码过长，选择将这部分写在一个.js文件，而.html只需载入即可。具体代码分析就不进行，各位可自行理解。代码如下：</p>
<p><strong>china_map.html:</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>, <span class="attr">height</span>=<span class="string">100%</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>学生信息<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/jquery-1.11.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/echarts.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/china.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;../static/css/china_map.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span>地图<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/ec_map.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../static/js/controller.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-反馈数据库数据"><a href="#4-反馈数据库数据" class="headerlink" title="4.反馈数据库数据"></a>4.反馈数据库数据</h3><p>写好前端页面后，现在需要将数据库的数据依照省份传到地图里，这里我们采用<strong>Flask + ajax</strong>的方式实现。</p>
<p><strong>Flask</strong>是一个微型的Python开发的Web框架，使用的方式如下：</p>
<p><img src="/2020/11/12/china-map/image-20201112192847962.png" alt="image-20201112192847962"></p>
<p>创建成功后，结构目录如下：</p>
<p><img src="/2020/11/12/china-map/image-20201112193132936.png" alt="image-20201112193132936"></p>
<p><strong>app.py</strong>是我们运行的主程序，在这里我们可以定义路由地址，并在该路由地址下实现相关函数的调用。例如如下代码：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">@app.route(&#x27;/&#x27;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello World!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>意思是当我们运行app.py时，会弹出前端页面所在的端口地址，如下图：</p>
<p><img src="/2020/11/12/china-map/image-20201112193752957.png" alt="image-20201112193752957"></p>
<p>而上面代码里的<code>app.route(&#39;/&#39;)</code>对应于<strong>127.0.0.1:5000/**的</strong>’/‘**，表示只要进入该网址，就会执行hello_world函数，返回一个Hello world到页面里。</p>
<p>理解Flask的运行逻辑后，我们需要考虑怎么提取数据库数据。本次我们需要在页面上实现这样一个效果：当鼠标放在某一省份时，会自动将来自该省份的学生总人数、男生人数、所有男生名字、女生人数、所有女生名字都显示出来。所以按照要求，我们定义相应的提取函数。代码如下：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 获取总人数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_people</span>():</span></span><br><span class="line">    sql = <span class="string">&quot;select province,count(name) from studentinfo &quot;</span> \</span><br><span class="line">          <span class="string">&quot;group by province&quot;</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取男生数量</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_nums_man</span>():</span></span><br><span class="line">    sql = <span class="string">&quot;select province,count(name) from studentinfo &quot;</span> \</span><br><span class="line">          <span class="string">&quot;where sex=&#x27;男&#x27;&quot;</span> \</span><br><span class="line">          <span class="string">&quot;group by province&quot;</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取女生数量</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_nums_woman</span>():</span></span><br><span class="line">    sql = <span class="string">&quot;select province,count(name) from studentinfo &quot;</span> \</span><br><span class="line">          <span class="string">&quot;where sex=&#x27;女&#x27;&quot;</span> \</span><br><span class="line">          <span class="string">&quot;group by province&quot;</span></span><br><span class="line">    res = query(sql)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取男生名字</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names_man</span>():</span></span><br><span class="line">    provinces = [<span class="string">&quot;北京&quot;</span>, <span class="string">&quot;天津&quot;</span>, <span class="string">&quot;黑龙江&quot;</span>, <span class="string">&quot;吉林&quot;</span>, <span class="string">&quot;辽宁&quot;</span>, <span class="string">&quot;内蒙古&quot;</span>, <span class="string">&quot;山西&quot;</span>, <span class="string">&quot;山东&quot;</span>, <span class="string">&quot;河北&quot;</span>, <span class="string">&quot;河南&quot;</span>, <span class="string">&quot;湖北&quot;</span>, <span class="string">&quot;湖南&quot;</span>, <span class="string">&quot;江西&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;江苏&quot;</span>, <span class="string">&quot;浙江&quot;</span>, <span class="string">&quot;上海&quot;</span>, <span class="string">&quot;福建&quot;</span>, <span class="string">&quot;广东&quot;</span>, <span class="string">&quot;广西&quot;</span>, <span class="string">&quot;贵州&quot;</span>, <span class="string">&quot;云南&quot;</span>, <span class="string">&quot;四川&quot;</span>, <span class="string">&quot;重庆&quot;</span>, <span class="string">&quot;陕西&quot;</span>, <span class="string">&quot;青海&quot;</span>, <span class="string">&quot;新疆&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;西藏&quot;</span>, <span class="string">&quot;甘肃&quot;</span>, <span class="string">&quot;安徽&quot;</span>, <span class="string">&quot;宁夏&quot;</span>, <span class="string">&quot;海南&quot;</span>, <span class="string">&quot;香港&quot;</span>, <span class="string">&quot;澳门&quot;</span>, <span class="string">&quot;台湾&quot;</span>]</span><br><span class="line">    man_names = []</span><br><span class="line">    man_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(provinces)):</span><br><span class="line">        sql = <span class="string">&quot;select name from studentinfo where province = &#x27;&#123;&#125;&#x27; and sex = &#x27;&#123;&#125;&#x27;&quot;</span>.<span class="built_in">format</span>(provinces[i], <span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">        res = query(sql)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">            man_name += <span class="string">&quot;&#123;&#125; &quot;</span>.<span class="built_in">format</span>(item[<span class="number">0</span>])</span><br><span class="line">        man_names.append((provinces[i], man_name))</span><br><span class="line">        man_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> man_names</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取女生名字</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_names_woman</span>():</span></span><br><span class="line">    provinces = [<span class="string">&quot;北京&quot;</span>, <span class="string">&quot;天津&quot;</span>, <span class="string">&quot;黑龙江&quot;</span>, <span class="string">&quot;吉林&quot;</span>, <span class="string">&quot;辽宁&quot;</span>, <span class="string">&quot;内蒙古&quot;</span>, <span class="string">&quot;山西&quot;</span>, <span class="string">&quot;山东&quot;</span>, <span class="string">&quot;河北&quot;</span>, <span class="string">&quot;河南&quot;</span>, <span class="string">&quot;湖北&quot;</span>, <span class="string">&quot;湖南&quot;</span>, <span class="string">&quot;江西&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;江苏&quot;</span>, <span class="string">&quot;浙江&quot;</span>, <span class="string">&quot;上海&quot;</span>, <span class="string">&quot;福建&quot;</span>, <span class="string">&quot;广东&quot;</span>, <span class="string">&quot;广西&quot;</span>, <span class="string">&quot;贵州&quot;</span>, <span class="string">&quot;云南&quot;</span>, <span class="string">&quot;四川&quot;</span>, <span class="string">&quot;重庆&quot;</span>, <span class="string">&quot;陕西&quot;</span>, <span class="string">&quot;青海&quot;</span>, <span class="string">&quot;新疆&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;西藏&quot;</span>, <span class="string">&quot;甘肃&quot;</span>, <span class="string">&quot;安徽&quot;</span>, <span class="string">&quot;宁夏&quot;</span>, <span class="string">&quot;海南&quot;</span>, <span class="string">&quot;香港&quot;</span>, <span class="string">&quot;澳门&quot;</span>, <span class="string">&quot;台湾&quot;</span>]</span><br><span class="line">    woman_names = []</span><br><span class="line">    woman_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="built_in">len</span>(provinces)):</span><br><span class="line">        sql = <span class="string">&quot;select name from studentinfo where province = &#x27;&#123;&#125;&#x27; and sex = &#x27;&#123;&#125;&#x27;&quot;</span>.<span class="built_in">format</span>(provinces[i], <span class="string">&#x27;女&#x27;</span>)</span><br><span class="line">        res = query(sql)</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> res:</span><br><span class="line">            woman_name += <span class="string">&quot;&#123;&#125; &quot;</span>.<span class="built_in">format</span>(item[<span class="number">0</span>])</span><br><span class="line">        woman_names.append((provinces[i], woman_name))</span><br><span class="line">        woman_name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> woman_names</span><br></pre></td></tr></table></figure>

<p>提取后就要传给地图，这里我们采用<strong>ajax</strong>来载入数据。它的使用方法是先设置一个要跳转到的路由地址，我们可以在app.py中对这一路由地址定义一个函数，将提取的数据回传给ajax，ajax收取数据后再设置给地图的option.series.data，即可将数据载入到地图。代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_map_data</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        <span class="comment">// ajax执行的路由地址</span></span><br><span class="line">        url: <span class="string">&#x27;/map&#x27;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        成功访问路由地址时，运行如下函数，参数为res</span></span><br><span class="line"><span class="comment">        将提取的数据分类别赋值给option.series.data，提供页面显示数据</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">            map_option.series[<span class="number">0</span>].data=res.total_nums  <span class="comment">//总人数</span></span><br><span class="line">            map_option.series[<span class="number">1</span>].data=res.man_nums    <span class="comment">//男生人数</span></span><br><span class="line">            map_option.series[<span class="number">2</span>].data=res.man_names   <span class="comment">//所有男生名字</span></span><br><span class="line">            map_option.series[<span class="number">3</span>].data=res.woman_nums  <span class="comment">//女生人数</span></span><br><span class="line">            map_option.series[<span class="number">4</span>].data=res.woman_names <span class="comment">//所有女生名字</span></span><br><span class="line">            map.setOption(map_option)           <span class="comment">//echarts对象设置修改后的option配置，完成数据供应</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//不成功访问路由地址，不进行操作</span></span><br><span class="line">        error: <span class="function"><span class="keyword">function</span>(<span class="params">xhr, type, errorThrown</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 当链接到路由地址map，返回地图数据</span></span><br><span class="line"><span class="meta">@app.route(&#x27;/map&#x27;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_map_data</span>():</span></span><br><span class="line">    <span class="comment"># 各省学生总人数</span></span><br><span class="line">    total_nums = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> utils.get_all_people():</span><br><span class="line">        total_nums.append(&#123;<span class="string">&#x27;name&#x27;</span>: item[<span class="number">0</span>], <span class="string">&#x27;value&#x27;</span>: <span class="built_in">int</span>(item[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 各省男学生人数</span></span><br><span class="line">    man_nums = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> utils.get_nums_man():</span><br><span class="line">        man_nums.append(&#123;<span class="string">&#x27;name&#x27;</span>: item[<span class="number">0</span>], <span class="string">&#x27;value&#x27;</span>: <span class="built_in">int</span>(item[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 各省女学生人数</span></span><br><span class="line">    woman_nums = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> utils.get_nums_woman():</span><br><span class="line">        woman_nums.append(&#123;<span class="string">&#x27;name&#x27;</span>: item[<span class="number">0</span>], <span class="string">&#x27;value&#x27;</span>: <span class="built_in">int</span>(item[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 各省男学生名字</span></span><br><span class="line">    man_names = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> utils.get_names_man():</span><br><span class="line">        man_names.append(&#123;<span class="string">&#x27;name&#x27;</span>: item[<span class="number">0</span>], <span class="string">&#x27;value&#x27;</span>: <span class="built_in">str</span>(item[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 各省女学生名字</span></span><br><span class="line">    woman_names = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> utils.get_names_woman():</span><br><span class="line">        woman_names.append(&#123;<span class="string">&#x27;name&#x27;</span>: item[<span class="number">0</span>], <span class="string">&#x27;value&#x27;</span>: <span class="built_in">str</span>(item[<span class="number">1</span>])&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 将上述数据以字典形式存储</span></span><br><span class="line">    res = &#123;&#125;</span><br><span class="line">    res[<span class="string">&#x27;total_nums&#x27;</span>] = total_nums</span><br><span class="line">    res[<span class="string">&#x27;man_nums&#x27;</span>] = man_nums</span><br><span class="line">    res[<span class="string">&#x27;woman_nums&#x27;</span>] = woman_nums</span><br><span class="line">    res[<span class="string">&#x27;man_names&#x27;</span>] = man_names</span><br><span class="line">    res[<span class="string">&#x27;woman_names&#x27;</span>] = woman_names</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 以json形式返回结果给controller.js</span></span><br><span class="line">    <span class="keyword">return</span> jsonify(res)</span><br></pre></td></tr></table></figure>

<p>至此我们完成了将数据库数据传给前端页面。</p>
<h3 id="5-显示各省份学生信息"><a href="#5-显示各省份学生信息" class="headerlink" title="5.显示各省份学生信息"></a>5.显示各省份学生信息</h3><p>在第4步中我们提及了学生信息的显示要求，即将来自该省份的学生总人数、男生人数、所有男生名字、女生人数、所有女生名字都显示出来。所以我们需要在地图的option配置里设置5个series，分别存储这5部分的数据。代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">series: [</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;学生人数&#x27;</span>,</span><br><span class="line">        type: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        mapType: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        roam: <span class="literal">false</span>, <span class="comment">//拖动和缩放</span></span><br><span class="line">        <span class="comment">// 左侧小导航图标</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                borderWidth: <span class="number">.5</span>, <span class="comment">//区域边框宽度</span></span><br><span class="line">                borderColor: <span class="string">&#x27;#009fe8&#x27;</span>, <span class="comment">//区域边框颜色</span></span><br><span class="line">                areaColor: <span class="string">&quot;#ffefd5&quot;</span>, <span class="comment">//区域颜色</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123; <span class="comment">//鼠标滑过地图高亮的相关设置</span></span><br><span class="line">                borderWidth: <span class="number">.5</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#4b0082&#x27;</span>,</span><br><span class="line">                areaColor: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            show: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: <span class="literal">true</span>, <span class="comment">//省份名称</span></span><br><span class="line">                fontSize: <span class="number">10</span>,</span><br><span class="line">                color: <span class="string">&#x27;#111111&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                show: <span class="literal">true</span>,</span><br><span class="line">                fontSize: <span class="number">8</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: []  <span class="comment">//数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;男生人数&#x27;</span>,</span><br><span class="line">        type: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        mapType: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        roam: <span class="literal">false</span>, <span class="comment">//拖动和缩放</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                borderWidth: <span class="number">.5</span>, <span class="comment">//区域边框宽度</span></span><br><span class="line">                borderColor: <span class="string">&#x27;#009fe8&#x27;</span>, <span class="comment">//区域边框颜色</span></span><br><span class="line">                areaColor: <span class="string">&quot;#ffefd5&quot;</span>, <span class="comment">//区域颜色</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123; <span class="comment">//鼠标滑过地图高亮的相关设置</span></span><br><span class="line">                borderWidth: <span class="number">.5</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#4b0082&#x27;</span>,</span><br><span class="line">                areaColor: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            show: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: <span class="literal">true</span>, <span class="comment">//省份名称</span></span><br><span class="line">                fontSize: <span class="number">10</span>,</span><br><span class="line">                color: <span class="string">&#x27;#111111&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                show: <span class="literal">true</span>,</span><br><span class="line">                fontSize: <span class="number">8</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [],  <span class="comment">//数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;男生&#x27;</span>,</span><br><span class="line">        type: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        mapType: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        roam: <span class="literal">false</span>, <span class="comment">//拖动和缩放</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                borderWidth: <span class="number">.5</span>, <span class="comment">//区域边框宽度</span></span><br><span class="line">                borderColor: <span class="string">&#x27;#009fe8&#x27;</span>, <span class="comment">//区域边框颜色</span></span><br><span class="line">                areaColor: <span class="string">&quot;#ffefd5&quot;</span>, <span class="comment">//区域颜色</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123; <span class="comment">//鼠标滑过地图高亮的相关设置</span></span><br><span class="line">                borderWidth: <span class="number">.5</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#4b0082&#x27;</span>,</span><br><span class="line">                areaColor: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            show: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: <span class="literal">true</span>, <span class="comment">//省份名称</span></span><br><span class="line">                fontSize: <span class="number">10</span>,</span><br><span class="line">                color: <span class="string">&#x27;#111111&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                show: <span class="literal">true</span>,</span><br><span class="line">                fontSize: <span class="number">8</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [],  <span class="comment">//数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;女生人数&#x27;</span>,</span><br><span class="line">        type: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        mapType: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        roam: <span class="literal">false</span>, <span class="comment">//拖动和缩放</span></span><br><span class="line">        <span class="comment">// 左侧小导航图标</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                borderWidth: <span class="number">.5</span>, <span class="comment">//区域边框宽度</span></span><br><span class="line">                borderColor: <span class="string">&#x27;#009fe8&#x27;</span>, <span class="comment">//区域边框颜色</span></span><br><span class="line">                areaColor: <span class="string">&quot;#ffefd5&quot;</span>, <span class="comment">//区域颜色</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123; <span class="comment">//鼠标滑过地图高亮的相关设置</span></span><br><span class="line">                borderWidth: <span class="number">.5</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#4b0082&#x27;</span>,</span><br><span class="line">                areaColor: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            show: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: <span class="literal">true</span>, <span class="comment">//省份名称</span></span><br><span class="line">                fontSize: <span class="number">10</span>,</span><br><span class="line">                color: <span class="string">&#x27;#111111&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                show: <span class="literal">true</span>,</span><br><span class="line">                fontSize: <span class="number">8</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: []  <span class="comment">//数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;女生&#x27;</span>,</span><br><span class="line">        type: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">        mapType: <span class="string">&#x27;china&#x27;</span>,</span><br><span class="line">        roam: <span class="literal">false</span>, <span class="comment">//拖动和缩放</span></span><br><span class="line">        itemStyle: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                borderWidth: <span class="number">.5</span>, <span class="comment">//区域边框宽度</span></span><br><span class="line">                borderColor: <span class="string">&#x27;#009fe8&#x27;</span>, <span class="comment">//区域边框颜色</span></span><br><span class="line">                areaColor: <span class="string">&quot;#ffefd5&quot;</span>, <span class="comment">//区域颜色</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123; <span class="comment">//鼠标滑过地图高亮的相关设置</span></span><br><span class="line">                borderWidth: <span class="number">.5</span>,</span><br><span class="line">                borderColor: <span class="string">&#x27;#4b0082&#x27;</span>,</span><br><span class="line">                areaColor: <span class="string">&quot;#fff&quot;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">            show: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        label: &#123;</span><br><span class="line">            normal: &#123;</span><br><span class="line">                show: <span class="literal">true</span>, <span class="comment">//省份名称</span></span><br><span class="line">                fontSize: <span class="number">10</span>,</span><br><span class="line">                color: <span class="string">&#x27;#111111&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            emphasis: &#123;</span><br><span class="line">                show: <span class="literal">true</span>,</span><br><span class="line">                fontSize: <span class="number">8</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        data: [],  <span class="comment">//数据</span></span><br><span class="line">    &#125;]</span><br></pre></td></tr></table></figure>

<p>光有数据还不行，此时将鼠标放在省份是没有任何反应的，所以我们需要对消息框进行自定义设置。代码如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 鼠标放在指定省份上显示的信息</span></span><br><span class="line">tooltip: &#123;</span><br><span class="line">    trigger: <span class="string">&#x27;item&#x27;</span>,</span><br><span class="line">    <span class="comment">// 按照series的顺序输出相关信息</span></span><br><span class="line">    formatter: <span class="function"><span class="keyword">function</span> (<span class="params">params</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 第一行显示每个省份的名字</span></span><br><span class="line">        <span class="keyword">var</span> res = params.name + <span class="string">&#x27;&lt;br/&gt;&#x27;</span>;</span><br><span class="line">        <span class="comment">// 获取option里的series</span></span><br><span class="line">        <span class="keyword">var</span> myseries = map_option.series;</span><br><span class="line">        <span class="comment">// 遍历每个series，将每一个series数据逐行输出</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; myseries.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; myseries[i].data.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (myseries[i].data[j].name == params.name) &#123;</span><br><span class="line">                    res += myseries[i].name + <span class="string">&#x27; : &#x27;</span> + myseries[i].data[j].value + <span class="string">&#x27;&lt;/br&gt;&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 使显示的信息不超出边界</span></span><br><span class="line">    confine: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候我们再将鼠标放上，就会出现结果：</p>
<p><img src="/2020/11/12/china-map/image-20201112200129481.png" alt="image-20201112200129481"></p>
<p>至此我们完成了学生信息的显示，完成了所有的实现步骤。</p>
<hr>
<h2 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h2><ul>
<li><p>如果你使用的是Google浏览器，可能会出现程序或界面修改了，但显示的还是上一次的结果。这里可能是因为Google浏览器会对网页进行静态缓存，因此在访问同一静态网址时，会自动载入上一次的结果。解决的方法是按<strong>F12</strong>进入开发者模式，找到<strong>Network</strong>后，按<strong>F5</strong>刷新一遍，即可载入修改后的页面。</p>
<p><img src="/2020/11/12/china-map/image-20201112201255444.png" alt="image-20201112201255444"></p>
</li>
<li><p>完整代码见Github：<a href="https://github.com/zoukuan1/china-map">https://github.com/zoukuan1/china-map</a></p>
</li>
<li><p>如果js文件的链接失效，请前往上述Github地址寻找下载</p>
</li>
</ul>
]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>Flask</tag>
        <tag>echarts</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构——线性表及其c语言实现</title>
    <url>/2021/01/04/DataStructure-SqList/</url>
    <content><![CDATA[<h3 id="线性表定义"><a href="#线性表定义" class="headerlink" title="线性表定义"></a>线性表定义</h3><p>一个线性表是n个数据元素的有限序列，等价于数组。</p>
<h3 id="线性表结构"><a href="#线性表结构" class="headerlink" title="线性表结构"></a>线性表结构</h3><p>线性表的结构体由3部分组成：存储数据元素的空间起始地址、线性表存储的元素个数和线性表的长度大小。具体结构定义如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>					// 线性表结构体</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	ElemType *elem;				<span class="comment">// 线性表起始地址</span></span><br><span class="line">	<span class="keyword">int</span> length;				<span class="comment">// 线性表元素个数</span></span><br><span class="line">	<span class="keyword">int</span> listsize;				<span class="comment">// 线性表大小</span></span><br><span class="line">&#125;SqList;</span><br></pre></td></tr></table></figure>
<h3 id="线性表的使用操作"><a href="#线性表的使用操作" class="headerlink" title="线性表的使用操作"></a>线性表的使用操作</h3><h4 id="线性表初始化"><a href="#线性表初始化" class="headerlink" title="线性表初始化"></a>线性表初始化</h4><p>新建一个线性表变量后需要进行初始化：根据线性表初始化大小和元素类型，使用malloc为线性表分配存储空间，然后设置线性表的元素个数为0，线性表的长度大小为初始化大小。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">InitList</span><span class="params">(SqList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 线性表初始化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 为线性表分配(初始化大小 * 元素类型)大小的空间</span></span><br><span class="line">	L.elem = (ElemType *)<span class="built_in">malloc</span>(LIST_INIT_SIZE * <span class="keyword">sizeof</span>(ElemType));		</span><br><span class="line">	<span class="comment">// 线性表分配空间失败，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表初始化失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 分配空间成功，元素个数初始化为0，线性表大小初始化为初始化大小，返回bool值1</span></span><br><span class="line">	L.length = <span class="number">0</span>;</span><br><span class="line">	L.listsize = LIST_INIT_SIZE;</span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="销毁线性表"><a href="#销毁线性表" class="headerlink" title="销毁线性表"></a>销毁线性表</h4><p>线性表使用结束后需要进行销毁，释放所占用的空间资源。实现的方式为使用free进行销毁操作，并设置线性表的起始地址为空、元素个数为0、长度大小为0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">DestroyList</span><span class="params">(SqList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 销毁线性表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">free</span>(L.elem);			<span class="comment">// 释放分配给线性表的所有空间</span></span><br><span class="line">	L.elem = <span class="literal">NULL</span>;			<span class="comment">// 指针设为NULL，否则存在野指针</span></span><br><span class="line">	L.length = <span class="number">0</span>;</span><br><span class="line">	L.listsize = <span class="number">0</span>;			<span class="comment">// 线性表大小归0</span></span><br><span class="line">	<span class="comment">// 如果线性表仍存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 线性表不存在，返回bool值1</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="清空线性表"><a href="#清空线性表" class="headerlink" title="清空线性表"></a>清空线性表</h4><p>使用时可能需要将线性表重置并清空。实现的方式为使用free释放原来分配的空间，再进行一次初始化。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">ClearList</span><span class="params">(SqList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 清空线性表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果线性表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表不存在，清空失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">free</span>(L.elem);			<span class="comment">//释放分配给线性表的所有空间</span></span><br><span class="line">	<span class="comment">// 初始化线性表，得到新分配的空间资源，以前的数据已经清空</span></span><br><span class="line">	<span class="keyword">if</span> (InitList(L))</span><br><span class="line">		<span class="keyword">return</span> OK;</span><br><span class="line">	<span class="comment">// 初始化失败，返回bool值0</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表清空失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="判断线性表是否为空线性表"><a href="#判断线性表是否为空线性表" class="headerlink" title="判断线性表是否为空线性表"></a>判断线性表是否为空线性表</h4><p>判断的依据为线性表中是否存在数据元素，只需要根据线性表的元素个数来遍历线性表中的所有元素，如果存在数据元素则不为空，否则为空。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">SqListEmpty</span><span class="params">(SqList L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 判断线性表是否为空线性表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 遍历线性表元素个数，如果存在元素，返回bool值0</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; L.length - <span class="number">1</span>; i++)</span><br><span class="line">		<span class="keyword">if</span> (L.elem[i])</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 线性表不存在元素，返回bool值1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取线性表元素个数"><a href="#获取线性表元素个数" class="headerlink" title="获取线性表元素个数"></a>获取线性表元素个数</h4><p>在获取前需要判断线性表是否存在，存在则返回元素个数，不存在则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SqListLength</span><span class="params">(SqList L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取线性表元素个数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果线性表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表元素个数获取失败！&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 线性表存在，返回线性表元素个数</span></span><br><span class="line">	<span class="keyword">return</span> L.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取线性表指定位置的元素"><a href="#获取线性表指定位置的元素" class="headerlink" title="获取线性表指定位置的元素"></a>获取线性表指定位置的元素</h4><p>在获取前需要判断线性表是否只存在且指定位置是否合理，存在且合理则返回线性表指定位置的数据元素，否则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">GetElem</span><span class="params">(SqList L, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取线性表指定位置的元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果线性表不存在，或者指定位置不合理，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem || i &lt; <span class="number">1</span> || i &gt; SqListLength(L))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;获取线性表元素失败，请重试！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 返回线性表指定位置的元素</span></span><br><span class="line">	<span class="keyword">return</span> L.elem[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取指定元素的前驱"><a href="#获取指定元素的前驱" class="headerlink" title="获取指定元素的前驱"></a>获取指定元素的前驱</h4><p>在获取前需要判断线性表是否存在，不存在则返回bool值0，存在则在线性表中寻找指定数据元素，如果指定数据元素存在于线性表且不是第一个数据元素，返回该数据元素的前一个数据元素，否则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">PriorElem</span><span class="params">(SqList L, ElemType current_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取指定元素的前驱</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 线性表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表不存在！获取前驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 遍历线性表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 如果指定元素在线性表中且不是第一个元素，返回指定元素的前一个元素</span></span><br><span class="line">		<span class="keyword">if</span> (L.elem[i] == current_e &amp;&amp; i != <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">return</span> L.elem[i - <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;输入元素不在线性表中！获取前驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取指定元素的后驱"><a href="#获取指定元素的后驱" class="headerlink" title="获取指定元素的后驱"></a>获取指定元素的后驱</h4><p>与获取指定元素的前驱相似，只是判断条件不同：如果指定数据元素存在于线性表且不是最后一个元素，返回该数据元素的后一个数据元素。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">NextElem</span><span class="params">(SqList L, ElemType current_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取指定元素的后驱</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 线性表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表不存在！获取后驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 遍历线性表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//如果指定元素在线性表中且不是最后一个元素，返回指定元素的后一个元素</span></span><br><span class="line">		<span class="keyword">if</span> (L.elem[i] == current_e &amp;&amp; i != SqListLength(L)<span class="number">-1</span>)</span><br><span class="line">			<span class="keyword">return</span> L.elem[i + <span class="number">1</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;输入元素不在线性表中！获取后驱失败&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="插入元素到线性表的指定位置"><a href="#插入元素到线性表的指定位置" class="headerlink" title="插入元素到线性表的指定位置"></a>插入元素到线性表的指定位置</h4><p>在插入前需要判断插入的位置是否合理，不合理则返回bool值0，合理则判断当前线性表的元素个数是否已经达到线性表的长度大小，如果达到或者超过，需要为线性表重新分配空间。然后定义一个指针指向指定位置，从指定位置起将每一个数据元素后退一个空间，最后在指针处插入指定元素。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">SqListInsert</span><span class="params">(SqList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 插入元素到线性表的指定位置</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果插入位置不合理，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; SqListLength(L)+<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;插入位置i不符合要求！插入失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果线性表元素个数超过或达到线性表大小，扩充线性表大小，增加线性表空间</span></span><br><span class="line">	<span class="keyword">if</span> (L.length &gt;= L.listsize)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 重新分配空间，在原有空间的基础上按(扩增大小 * 元素类型)大小扩增空间</span></span><br><span class="line">		ElemType *newbase = (ElemType *)<span class="built_in">realloc</span>(L.elem, (L.listsize + LISTINCREMENT) * <span class="keyword">sizeof</span>(ElemType));</span><br><span class="line">		<span class="comment">// 如果新空间分配失败，返回bool值0</span></span><br><span class="line">		<span class="keyword">if</span> (!newbase)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表满元素，新建表失败&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">			<span class="keyword">return</span> ERROR;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 新空间分配成功，线性表起始地址指向新空间地址</span></span><br><span class="line">		L.elem = newbase;</span><br><span class="line">		<span class="comment">// 扩增线性表大小</span></span><br><span class="line">		L.listsize += LISTINCREMENT;</span><br><span class="line">	&#125;</span><br><span class="line">	ElemType *q = &amp;(L.elem[i - <span class="number">1</span>]);		<span class="comment">// 指向线性表指定位置</span></span><br><span class="line">	<span class="comment">// 从该位置起每一个元素后退一个空间</span></span><br><span class="line">	<span class="keyword">for</span> (ElemType* p = &amp;(L.elem[L.length - <span class="number">1</span>]); p &gt;= q; --p)</span><br><span class="line">		*(p + <span class="number">1</span>) = *p;</span><br><span class="line">	*q = e;				<span class="comment">// 指定位置插入指定元素</span></span><br><span class="line">	++L.length;			<span class="comment">// 线性表元素个数 + 1</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除线性表指定位置的元素"><a href="#删除线性表指定位置的元素" class="headerlink" title="删除线性表指定位置的元素"></a>删除线性表指定位置的元素</h4><p>在删除前需要判断线性表是否只存在且指定位置是否合理，不存在或不合理则返回bool值0。然后定义一个指针指向指定位置，定义中间变量保存指定位置的数据元素，再定义一个指针指向最后一个数据元素，从指定位置到最后一个元素位置，每一个数据元素前进一个空间，最后返回保存的数据元素。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">SqListDelete</span><span class="params">(SqList L, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 删除线性表指定位置的元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果线性表不存在，或者指定位置不合理，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.elem || i &lt; <span class="number">1</span> || i &gt; SqListLength(L))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;线性表元素删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	ElemType *p = &amp;(L.elem[i - <span class="number">1</span>]);				<span class="comment">// 指向线性表指定位置</span></span><br><span class="line">	ElemType e = *p;					<span class="comment">// 获取指定位置元素</span></span><br><span class="line">	ElemType *q = L.elem + L.length - <span class="number">1</span>;			<span class="comment">// 指向线性表最后一个元素</span></span><br><span class="line">	<span class="comment">// 从指定位置起到最后一个元素位置，每个元素前进一个空间</span></span><br><span class="line">	<span class="keyword">for</span> (++p; p &lt;= q; ++p)</span><br><span class="line">		*(p - <span class="number">1</span>) = *p;</span><br><span class="line">	--L.length;					<span class="comment">// 线性表元素个数 - 1</span></span><br><span class="line">	<span class="keyword">return</span> e;					<span class="comment">// 返回删除的元素</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="合并两个线性表成一个线性表"><a href="#合并两个线性表成一个线性表" class="headerlink" title="合并两个线性表成一个线性表"></a>合并两个线性表成一个线性表</h4><p>首先获取两个线性表的起始地址，接着设置新线性表的元素个数和线性表大小为两个线性表元素个数之和，然后分配空间给新线性表。如果空间分配失败，返回bool值0。再获取两个线性表的最后一个数据元素地址，同时遍历两个线性表，如果第一个线性表的当前元素小于第二个线性表，新线性表添加第一个线性表的当前元素，否则添加第二个线性表的当前元素，直至其中一个线性表的所有元素已添加到新线性表。最后如果另一个线性表有剩余元素，将所有剩余元素添加到新线性表。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">SqListMerge</span><span class="params">(SqList LA, SqList LB, SqList &amp;LC)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 合并两个线性表成一个线性表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ElemType *pa = LA.elem, *pb = LB.elem;				<span class="comment">// 获取两个线性表的起始地址</span></span><br><span class="line">	LC.listsize = LC.length = LA.length + LB.length;	<span class="comment">// 设置新线性表的元素个数和线性表大小为两个线性表元素个数之和</span></span><br><span class="line">	ElemType *pc = LC.elem = (ElemType *)<span class="built_in">malloc</span>(LC.listsize * <span class="keyword">sizeof</span>(ElemType));		<span class="comment">// 分配空间给新线性表</span></span><br><span class="line">	<span class="comment">// 如果空间分配失败，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!LC.elem)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;创建新线性表失败！线性表合并失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	ElemType *pa_last = LA.elem + LA.length - <span class="number">1</span>;		<span class="comment">// 获取第一个线性表的最后一个元素地址</span></span><br><span class="line">	ElemType *pb_last = LB.elem + LB.length - <span class="number">1</span>;		<span class="comment">// 获取第二个线性表的最后一个元素地址</span></span><br><span class="line">	<span class="comment">// 遍历两个线性表，如果其中一个线性表的所有元素已添加到新线性表，停止遍历</span></span><br><span class="line">	<span class="keyword">while</span> (pa &lt;= pa_last &amp;&amp; pb &lt;= pb_last)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 如果第一个线性表的当前元素小于第二个线性表，新线性表添加第一个线性表的当前元素</span></span><br><span class="line">		<span class="keyword">if</span> (*pa &lt;= *pb)</span><br><span class="line">			*pc++ = *pa++;</span><br><span class="line">		<span class="comment">// 反之添加第二个线性表的当前元素</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			*pc++ = *pb++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果第一个线性表有剩余元素，将所有剩余元素添加到新线性表</span></span><br><span class="line">	<span class="keyword">while</span> (pa &lt;= pa_last)</span><br><span class="line">		*pc++ = *pa++;</span><br><span class="line">	<span class="comment">// 如果第二个线性表有剩余元素，将所有剩余元素添加到新线性表</span></span><br><span class="line">	<span class="keyword">while</span> (pb &lt;= pb_last)</span><br><span class="line">		*pc++ = *pb++;</span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>线性表可以理解为数组，采用顺序结构的方式存储数据，特点是逻辑关系上相邻的两个元素在物理位置上也相邻。其优点在于可以随机存取表中任一元素，元素的存储位置可以用一个简单直观的公式来表示。其缺点在于插入或删除操作时需要移动大量元素。</p>
<p>线性表插入一个元素的平均移动次数：</p>
<script type="math/tex; mode=display">
E_{is}=\frac{1}{n+1} ∑_{i=1}^{n+1}{(n-i+1)} =\frac{n}{2}</script><p>线性表删除一个元素的平均移动次数：</p>
<script type="math/tex; mode=display">
E_{dl}=\frac{1}{n} ∑_{i=1}^{n}{(n-i)} =\frac{n-1}{2}</script>]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
        <tag>c语言</tag>
        <tag>线性表</tag>
      </tags>
  </entry>
  <entry>
    <title>数据结构——(带头结点)单链表及其c语言实现</title>
    <url>/2021/01/05/DataStructure-LinkList/</url>
    <content><![CDATA[<h3 id="链表定义"><a href="#链表定义" class="headerlink" title="链表定义"></a>链表定义</h3><p>链表是一种物理存储单元上非连续、非顺序的存储结构，数据元素的逻辑顺序通过链表中的指针链接次序实现。</p>
<h3 id="链表结构"><a href="#链表结构" class="headerlink" title="链表结构"></a>链表结构</h3><p>链表的结构体由2部分组成：链表结点和链表元素个数。而链表结点由数据元素和指向下一个结点的指针这2部分组成。具体结构定义如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">LNode</span>			// 链表节点结构体</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	ElemType data;				<span class="comment">// 节点数据元素</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">LNode</span> *<span class="title">next</span>;</span>			<span class="comment">// 指向下一个节点的指针				</span></span><br><span class="line">&#125;*Link;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>                  // 链表结构体</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	Link head, tail;			<span class="comment">// 头结点，尾结点</span></span><br><span class="line">	<span class="keyword">int</span> len;					<span class="comment">// 链表数据元素个数</span></span><br><span class="line">&#125;LinkList;</span><br></pre></td></tr></table></figure>
<h3 id="链表的使用操作"><a href="#链表的使用操作" class="headerlink" title="链表的使用操作"></a>链表的使用操作</h3><h4 id="链表初始化"><a href="#链表初始化" class="headerlink" title="链表初始化"></a>链表初始化</h4><p>新建一个链表变量后需要进行初始化：使用malloc为链表头结点分配一个链表结点大小的存储空间，然后设置链表的元素个数为0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">InitList</span><span class="params">(LinkList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 链表初始化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	L.head = (Link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));		<span class="comment">// 为链表分配一个链表结点大小的空间</span></span><br><span class="line">	<span class="comment">// 分配空间失败，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表初始化失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 分配空间成功，尾结点和头结点指向同一地址，元素个数初始化为0，返回bool值1</span></span><br><span class="line">	L.head-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	L.tail = L.head;</span><br><span class="line">	L.len = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="销毁链表"><a href="#销毁链表" class="headerlink" title="销毁链表"></a>销毁链表</h4><p>链表使用结束后需要进行销毁，释放所占用的空间资源。实现的方式为使用free进行销毁操作，并设置链表的头结点为null、元素个数为0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">DestroyList</span><span class="params">(LinkList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 销毁链表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">//释放所有分配的空间</span></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)		</span><br><span class="line">	&#123;</span><br><span class="line">		Link q = p-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(p);</span><br><span class="line">		p = q;</span><br><span class="line">	&#125;</span><br><span class="line">	L.head = L.tail = <span class="literal">NULL</span>;</span><br><span class="line">	L.len = <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 如果链表仍存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表销毁失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 链表不存在，返回bool值1</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="清空链表"><a href="#清空链表" class="headerlink" title="清空链表"></a>清空链表</h4><p>使用时可能需要将链表重置并清空。实现的方式为使用free释放原来分配的空间，只保留头结点空间。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">ClearList</span><span class="params">(LinkList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 清空链表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，清空失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head-&gt;next;</span><br><span class="line">	<span class="comment">//释放分配的所有空间</span></span><br><span class="line">	<span class="keyword">while</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		Link q = p-&gt;next;</span><br><span class="line">		<span class="built_in">free</span>(p);</span><br><span class="line">		p = q;</span><br><span class="line">	&#125;</span><br><span class="line">	L.tail = L.head;</span><br><span class="line">	L.len = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在第一个结点位置插入元素"><a href="#在第一个结点位置插入元素" class="headerlink" title="在第一个结点位置插入元素"></a>在第一个结点位置插入元素</h4><p>在第一个结点位置插入元素时，先判断链表是否存在，不存在则返回0；存在则新建一个结点空间，将元素值赋值到结点，指向下一个结点的指针指向原来的第一个结点，头结点指向下一个结点的指针指向新建的结点，最后链表的元素个数 + 1。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">InsFirst</span><span class="params">(LinkList &amp;L, ElemType e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 在第一个结点位置插入元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，插入元素失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link tmp = (Link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));	<span class="comment">// 创建结点空间</span></span><br><span class="line">	tmp-&gt;data = e;	<span class="comment">// 插入结点元素值</span></span><br><span class="line">	tmp-&gt;next = L.head-&gt;next;	<span class="comment">// 结点链接原第一个结点</span></span><br><span class="line">	L.head-&gt;next = tmp;		<span class="comment">// 头结点链接新第一个结点</span></span><br><span class="line">	L.len += <span class="number">1</span>;		<span class="comment">// 链表元素个数 + 1</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除第一个结点"><a href="#删除第一个结点" class="headerlink" title="删除第一个结点"></a>删除第一个结点</h4><p>删除第一个结点时，先判断链表是否存在，不存在则返回0；存在则再判断第一个结点是否存在，不存在则返回0，存在则找到第一个结点的位置，获取第一个结点的元素值，接着头结点指向下一个结点的指针指向第二个结点，这样可以是第二个结点成为新的第一个结点。然后释放原来第一个结点的空间资源，最后链表的元素个数 - 1。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">DelFirst</span><span class="params">(LinkList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 删除第一个结点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果第一个结点不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head-&gt;next)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表第一个位置不存在元素，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head-&gt;next;		<span class="comment">// 找到第一个结点位置</span></span><br><span class="line">	ElemType e = p-&gt;data;		<span class="comment">// 获取第一个结点的元素值</span></span><br><span class="line">	L.head-&gt;next = p-&gt;next;		<span class="comment">// 头结点链接第二个结点</span></span><br><span class="line">	<span class="built_in">free</span>(p);		<span class="comment">// 释放第一个结点的空间资源</span></span><br><span class="line">	L.len -= <span class="number">1</span>;		<span class="comment">// 链表元素个数 - 1</span></span><br><span class="line">	<span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在链表最后插入元素"><a href="#在链表最后插入元素" class="headerlink" title="在链表最后插入元素"></a>在链表最后插入元素</h4><p>在链表最后插入元素时，先判断链表是否存在，不存在则返回0；存在则新建一个结点空间，将元素值赋值到结点，指向下一个结点的指针设为null，尾结点指向下一个结点的指针指向新建的结点，尾结点设置为新建结点，这样可以使尾结点始终保持在链表的最后一个结点上。最后链表的元素个数 + 1。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">Append</span><span class="params">(LinkList &amp;L, ElemType e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 在链表最后插入元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，插入元素失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link tmp = (Link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));	<span class="comment">// 创建节点空间</span></span><br><span class="line">	tmp-&gt;data = e;	<span class="comment">// 插入结点元素值</span></span><br><span class="line">	tmp-&gt;next = <span class="literal">NULL</span>;	<span class="comment">//指向下一个结点的指针为NULL</span></span><br><span class="line">	L.tail-&gt;next = tmp;	<span class="comment">// 尾结点链接新建结点</span></span><br><span class="line">	L.tail = tmp;	<span class="comment">// 尾结点设为新建结点</span></span><br><span class="line">	L.len += <span class="number">1</span>;	<span class="comment">// 链表元素个数 + 1</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="删除最后一个结点"><a href="#删除最后一个结点" class="headerlink" title="删除最后一个结点"></a>删除最后一个结点</h4><p>删除最后一个结点时，先判断链表是否存在，不存在则返回0；存在则再判断尾结点是否等于头结点，等于则返回0，不等于则找到尾结点的上一个结点(p)的位置，获取尾结点的元素值，释放原来第一个结点的空间资源。接着p指向下一个结点的指针设为null，尾结点设为p，这样可以把p结点设置为新的尾结点。最后链表的元素个数 - 1。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">Remove</span><span class="params">(LinkList &amp;L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 删除最后一个结点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果尾结点在头结点处，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (L.tail == L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表最后一个位置不存在元素，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;							</span><br><span class="line">	<span class="comment">// 找到尾结点的上一个结点</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; SqListLength(L); i++)</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">	ElemType e = p-&gt;next-&gt;data;		<span class="comment">// 获取尾结点元素值</span></span><br><span class="line">	<span class="built_in">free</span>(p-&gt;next);		<span class="comment">// 释放尾结点空间资源</span></span><br><span class="line">	p-&gt;next = <span class="literal">NULL</span>;		<span class="comment">// 指向尾结点的指针设为NULL</span></span><br><span class="line">	L.tail = p;		<span class="comment">// 新的尾结点为当前结点</span></span><br><span class="line">	L.len -= <span class="number">1</span>;		<span class="comment">// 链表元素个数 - 1</span></span><br><span class="line">	<span class="keyword">return</span> e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在指定元素前插入元素"><a href="#在指定元素前插入元素" class="headerlink" title="在指定元素前插入元素"></a>在指定元素前插入元素</h4><p>在指定元素前插入元素时，先判断链表是否存在，不存在则返回0；存在则遍历链表所有元素，如果找到指定元素，新建一个结点空间，将元素值赋值到新建结点，指向下一个结点的指针指向当前节点，当前节点的上一个结点的指向下一个结点的指针指向新建结点，链表的元素个数 + 1。如果在链表中找不到指定元素，返回0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">InsBefore</span><span class="params">(LinkList &amp;L, ElemType current_e, ElemType insert_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 在指定元素前插入元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head, q;</span><br><span class="line">	<span class="comment">// 遍历链表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		q = p-&gt;next;</span><br><span class="line">		<span class="comment">// 找到指定元素</span></span><br><span class="line">		<span class="keyword">if</span> (q-&gt;data == current_e)</span><br><span class="line">		&#123;</span><br><span class="line">			Link tmp = (Link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));	<span class="comment">// 创建结点空间</span></span><br><span class="line">			tmp-&gt;data = insert_e;	<span class="comment">// 新建结点赋值</span></span><br><span class="line">			tmp-&gt;next = q;	<span class="comment">// 新建结点链接当前结点</span></span><br><span class="line">			p-&gt;next = tmp;	<span class="comment">// 当前结点的上一个结点链接新建结点</span></span><br><span class="line">			L.len += <span class="number">1</span>;	<span class="comment">// 链表元素个数 + 1</span></span><br><span class="line">			<span class="keyword">return</span> OK;</span><br><span class="line">		&#125;</span><br><span class="line">		p = q;		<span class="comment">// 没找到则往下寻找</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 链表找不到指定元素，返回bool值0</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表中找不到插入元素位置，插入失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="在指定元素后插入元素"><a href="#在指定元素后插入元素" class="headerlink" title="在指定元素后插入元素"></a>在指定元素后插入元素</h4><p>在指定元素后插入元素时，先判断链表是否存在，不存在则返回0；存在则遍历链表所有元素，如果找到指定元素，新建一个结点空间，将元素值赋值到新建结点，指向下一个结点的指针指向当前节点的下一个结点，当前节点的指向下一个结点的指针指向新建结点，链表的元素个数 + 1。如果指定元素位置在尾结点处，将尾结点设为新建结点。如果在链表中找不到指定元素，返回0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">InsAfter</span><span class="params">(LinkList &amp;L, ElemType current_e, ElemType insert_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 在指定元素后插入元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在，删除失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">// 遍历链表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		<span class="comment">// 找到指定元素</span></span><br><span class="line">		<span class="keyword">if</span> (p-&gt;data == current_e)</span><br><span class="line">		&#123;</span><br><span class="line">			Link tmp = (Link)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Link));		<span class="comment">// 创建结点空间</span></span><br><span class="line">			tmp-&gt;data = insert_e;		<span class="comment">// 新建结点赋值</span></span><br><span class="line">			tmp-&gt;next = p-&gt;next;		<span class="comment">// 新建结点链接当前结点的下一个结点</span></span><br><span class="line">			p-&gt;next = tmp;		<span class="comment">// 当前结点链接新建结点</span></span><br><span class="line">			L.len += <span class="number">1</span>;		<span class="comment">// 链表元素个数 + 1</span></span><br><span class="line">			<span class="comment">// 如果指定元素位置在尾结点处，将尾结点设为新建结点</span></span><br><span class="line">			<span class="keyword">if</span> (i == SqListLength(L))</span><br><span class="line">				L.tail = tmp;</span><br><span class="line">			<span class="keyword">return</span> OK;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 链表找不到指定元素，返回bool值0</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表中找不到插入元素位置，插入失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="判断链表是否为空链表"><a href="#判断链表是否为空链表" class="headerlink" title="判断链表是否为空链表"></a>判断链表是否为空链表</h4><p>判断的依据为链表中是否存在数据元素，只需要判断头结点的下一个结点是否存在，如果存在则链表不为空，否则为空。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">SqListEmpty</span><span class="params">(LinkList L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 判断链表是否为空链表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 遍历链表元素个数，如果存在元素，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (L.head-&gt;next)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	<span class="comment">// 链表不存在元素，返回bool值1</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取链表元素个数"><a href="#获取链表元素个数" class="headerlink" title="获取链表元素个数"></a>获取链表元素个数</h4><p>在获取前需要判断链表是否存在，存在则返回元素个数，不存在则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">SqListLength</span><span class="params">(LinkList L)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取链表元素个数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表元素个数获取失败！&quot;</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 链表存在，返回链表元素个数</span></span><br><span class="line">	<span class="keyword">return</span> L.len;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="更新链表指定位置的元素值"><a href="#更新链表指定位置的元素值" class="headerlink" title="更新链表指定位置的元素值"></a>更新链表指定位置的元素值</h4><p>在更新前需要判断链表是否只存在且指定位置是否合理，存在且合理则更新链表指定位置的数据元素，否则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">SetCurElem</span><span class="params">(LinkList &amp;L, <span class="keyword">int</span> i, ElemType e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 更新链表指定位置的元素值</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，或者指定位置不合理，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head || i &lt; <span class="number">1</span> || i &gt; SqListLength(L))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;更新链表元素失败，请重试！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">// 找到指定位置的结点</span></span><br><span class="line">	<span class="keyword">while</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		i--;</span><br><span class="line">	&#125;</span><br><span class="line">	p-&gt;data = e;	<span class="comment">// 更新结点元素值</span></span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取链表指定位置的元素"><a href="#获取链表指定位置的元素" class="headerlink" title="获取链表指定位置的元素"></a>获取链表指定位置的元素</h4><p>在获取前需要判断链表是否只存在且指定位置是否合理，存在且合理则返回链表指定位置的数据元素，否则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">GetCurElem</span><span class="params">(LinkList L, <span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取链表指定位置的元素</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 如果链表不存在，或者指定位置不合理，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head || i &lt; <span class="number">1</span> || i &gt; SqListLength(L))</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;获取链表元素失败，请重试！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">// 找到指定位置</span></span><br><span class="line">	<span class="keyword">while</span> (i &gt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		i--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 返回链表指定位置的元素</span></span><br><span class="line">	<span class="keyword">return</span> p-&gt;data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取指定元素的前驱"><a href="#获取指定元素的前驱" class="headerlink" title="获取指定元素的前驱"></a>获取指定元素的前驱</h4><p>在获取前需要判断链表是否存在，不存在则返回bool值0，存在则在链表中寻找指定数据元素，如果指定数据元素存在于链表且不在第一个结点，返回该数据元素的前一个结点的元素值，否则返回bool值0。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">PriorElem</span><span class="params">(LinkList L, ElemType current_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取指定元素的前驱</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在！获取前驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">// 遍历链表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		Link q = p-&gt;next;</span><br><span class="line">		<span class="comment">// 如果指定元素在链表中且不是第一个元素，返回指定元素的前一个结点的元素值</span></span><br><span class="line">		<span class="keyword">if</span> (q-&gt;data == current_e &amp;&amp; i != <span class="number">1</span>)</span><br><span class="line">			<span class="keyword">return</span> p-&gt;data;</span><br><span class="line">		p = q;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;输入元素不在链表中！获取前驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="获取指定元素的后驱"><a href="#获取指定元素的后驱" class="headerlink" title="获取指定元素的后驱"></a>获取指定元素的后驱</h4><p>与获取指定元素的前驱相似，只是判断条件不同：如果指定数据元素存在于链表且不是最后一个结点，返回该数据元素的后一个结点的元素值。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">ElemType <span class="title">NextElem</span><span class="params">(LinkList L, ElemType current_e)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 获取指定元素的后驱</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// 链表不存在，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!L.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;链表不存在！获取后驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link p = L.head;</span><br><span class="line">	<span class="comment">// 遍历链表所有元素</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= SqListLength(L); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		p = p-&gt;next;</span><br><span class="line">		<span class="comment">// 如果指定元素在链表中且不是最后一个元素，返回指定元素的后一个结点的元素值</span></span><br><span class="line">		<span class="keyword">if</span> (p-&gt;data == current_e &amp;&amp; i != SqListLength(L))</span><br><span class="line">			<span class="keyword">return</span> p-&gt;next-&gt;data;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;输入元素不在链表中！获取后驱失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="合并两个链表成一个链表"><a href="#合并两个链表成一个链表" class="headerlink" title="合并两个链表成一个链表"></a>合并两个链表成一个链表</h4><p>首先初始化新链表。如果初始化失败，返回bool值0。再获取两个链表的第一个结点的指针，同时遍历两个链表，如果第一个链表的当前元素小于第二个链表，新链表指针指向第一个链表的当前结点，否则指向第二个链表的当前结点，直至其中一个链表的所有结点元素已添加到新链表。最后如果另一个链表有剩余元素，将所有剩余元素添加到新链表。源码如下：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">Status <span class="title">MergeLinkList</span><span class="params">(LinkList LA, LinkList LB, LinkList &amp;LC)</span></span></span><br><span class="line"><span class="function"><span class="comment">// 合并两个链表成一个链表</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	InitList(LC);</span><br><span class="line">	<span class="comment">// 如果空间分配失败，返回bool值0</span></span><br><span class="line">	<span class="keyword">if</span> (!LC.head)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">&quot;创建新链表失败！链表合并失败！&quot;</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">		<span class="keyword">return</span> ERROR;</span><br><span class="line">	&#125;</span><br><span class="line">	Link pa = LA.head-&gt;next;</span><br><span class="line">	Link pb = LB.head-&gt;next;</span><br><span class="line">	Link pc = LC.head;</span><br><span class="line">	<span class="comment">// 遍历两个链表，如果其中一个链表的所有元素已添加到新链表，停止遍历</span></span><br><span class="line">	<span class="keyword">while</span> (pa != <span class="literal">NULL</span> &amp;&amp; pb != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 如果第一个链表的当前元素小于第二个链表，新链表添加第一个链表的当前元素</span></span><br><span class="line">		<span class="keyword">if</span> (pa-&gt;data &lt;= pb-&gt;data)</span><br><span class="line">		&#123;</span><br><span class="line">			pc-&gt;next = pa;</span><br><span class="line">			pa = pa-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 反之添加第二个链表的当前元素</span></span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			pc-&gt;next = pb;</span><br><span class="line">			pb = pb-&gt;next;</span><br><span class="line">		&#125;</span><br><span class="line">		pc = pc-&gt;next;</span><br><span class="line">		LC.tail = pc;</span><br><span class="line">		LC.len += <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果第一个链表有剩余元素，将所有剩余元素添加到新链表</span></span><br><span class="line">	<span class="keyword">while</span> (pa != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		pc-&gt;next = pa;</span><br><span class="line">		pa = pa-&gt;next;</span><br><span class="line">		pc = pc-&gt;next;</span><br><span class="line">		LC.tail = pc;</span><br><span class="line">		LC.len += <span class="number">1</span>;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="comment">// 如果第二个链表有剩余元素，将所有剩余元素添加到新链表</span></span><br><span class="line">	<span class="keyword">while</span> (pb != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		pc-&gt;next = pb;</span><br><span class="line">		pb = pb-&gt;next;</span><br><span class="line">		pc = pc-&gt;next;</span><br><span class="line">		LC.tail = pc;</span><br><span class="line">		LC.len += <span class="number">1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>链表是一种物理存储单元上非连续、非顺序的存储结构，其链式结构的特点是用一组任意的存储单元存储线性表的数据元素，这组存储单元可以是连续的，也可以是不连续的。其优点在于能合理利用空间和插入、删除时不需要移动数据元素。其缺点在于某些线性化的操作不如顺序存储结构，而且数据元素之间的位序关系淡化。</p>
]]></content>
      <categories>
        <category>数据结构</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
        <tag>c语言</tag>
        <tag>链表</tag>
      </tags>
  </entry>
</search>
